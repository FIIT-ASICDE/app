model Repo {
  id                   String @db.Uuid                 @id @default(uuid())
  name                 String
  description          String?
  favorite             Boolean
  public               Boolean
  userOrganizationRepo RepoUserOrganization[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model RepoUserOrganization {
  userId         String @db.Uuid
  user           User         @relation(fields: [userId], references: [id])
  organizationId String @db.Uuid
  organization   Organization @relation(fields: [organizationId], references: [id])
  repoId         String @db.Uuid
  repo           Repo         @relation(fields: [repoId], references: [id])
  repoRole       RepoRole     @default(VIEWER)

  @@unique([userId, organizationId, repoId]) // Ensures a user can have one role per organization-repo pair
}

enum RepoRole {
  ADMIN
  MAINTAINER
  CONTRIBUTOR
  VIEWER
}
